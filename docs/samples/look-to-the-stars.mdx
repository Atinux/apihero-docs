---
sidebar_position: 1
hide_title: true
sidebar_label: "Look to the Stars"
---

import { CodeSandboxEmbed } from "@site/src/components/CodeSandboxEmbed";

## CodeSandbox

We've developed a sample Next.js app that demonstrates the use of calling the GitHub API from a Next.js app. You can view the source code on GitHub and run the app on CodeSandbox:

<CodeSandboxEmbed
  id="api-hero-look-to-the-stars-u6pgt9"
  module="/pages/index.tsx"
/>

## What's happening?

The app is a simple Next.js app that uses the GitHub API to fetch information about your favorite repository and returns the number of stars that repo has.

There are three key parts of this app that we'll look at:

### 1. The `ApiHeroProvider`

In [`/pages/index.tsx`](https://codesandbox.io/s/api-hero-look-to-the-stars-u6pgt9?file=/pages/index.tsx:634-666) you'll find the `ApiHeroProvider` component. This component is responsible for providing the API client to the rest of the app. It's also responsible for providing the API client with the API key that you'll need to make requests to the GitHub API.

```tsx title="/pages/index.tsx"
export default function App() {
  return (
    <APIHeroProvider>
      <Home />
    </APIHeroProvider>
  );
}
```

### 2. The `StarCount` component

In [`/pages/components/StarCount.tsx`](https://codesandbox.io/s/api-hero-look-to-the-stars-u6pgt9?file=/pages/components/StarCount.tsx:0-0) you'll find the `StarCount` component. This component is responsible for fetching the number of stars for a given repository and displaying that number to the user.

```tsx title="/pages/components/StarCount.tsx"
import { repos } from "@apihero/github";
import { createEndpoint } from "@apihero/react";
import Image from "next/image";
import { Spinner } from "./Spinner";

const useGetRepository = createEndpoint(repos.getRepo);

export function StarCount({ owner, repo }: { owner: string; repo: string }) {
  const { data, status, error } = useGetRepository({
    owner,
    repo,
  });

  return (
    <>
      <div className="flex h-full w-full flex-col text-2xl mb-5 items-center justify-top">
        {status === "loading" ? (
          <div className="relative w-96 h-96">
            <Spinner />
          </div>
        ) : status === "error" ? (
          <div className="flex justify-center flex-col flex-grow">
            <h2 className="text-8xl font-mono text-slate-100 mb-2">ðŸ«¤</h2>
            <p className="text-2xl font-mono text-slate-100 mb-2">
              Oops, repo {error.message.toLowerCase()}.
            </p>
          </div>
        ) : (
          <>
            <p className="text-2xl font-mono text-slate-100 mb-2">
              {owner}/{repo}
            </p>
            <div className="relative w-full h-full mb-5">
              <Image
                className="animate-star-animation "
                src="/star-large.svg"
                alt="Star"
                layout="fill"
              />
            </div>
            <h2 className="text-3xl font-bold font-poppins text-slate-100 w-full">
              {Intl.NumberFormat("en-US").format(data.stargazers_count)} stars
            </h2>
          </>
        )}
      </div>
    </>
  );
}
```
